/*!
 * g.Raphael 0.51 - Charting library, based on RaphaÃ«l
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
!function(){function c(c,d,e,f,g,h,i,j){var k,l={round:"round",sharp:"sharp",soft:"soft",square:"square"};if(g&&!f||!g&&!e)return i?"":j.path();switch(h=l[h]||"square",f=Math.round(f),e=Math.round(e),c=Math.round(c),d=Math.round(d),h){case"round":if(g)m=~~(e/2),m>f?(m=f,k=["M",c-~~(e/2),d,"l",0,0,"a",~~(e/2),m,0,0,1,e,0,"l",0,0,"z"]):k=["M",c-m,d,"l",0,m-f,"a",m,m,0,1,1,e,0,"l",0,f-m,"z"];else{var m=~~(f/2);m>e?(m=e,k=["M",c+.5,d+.5-~~(f/2),"l",0,0,"a",m,~~(f/2),0,0,1,0,f,"l",0,0,"z"]):k=["M",c+.5,d+.5-m,"l",e-m,0,"a",m,m,0,1,1,0,f,"l",m-e,0,"z"]}break;case"sharp":if(g)n=~~(e/2),k=["M",c+n,d,"l",-e,0,0,-b(f-n,0),n,-a(n,f),n,a(n,f),n,"z"];else{var n=~~(f/2);k=["M",c,d+n,"l",0,-f,b(e-n,0),0,a(n,e),n,-a(n,e),n+(f>2*n),"z"]}break;case"square":k=g?["M",c+~~(e/2),d,"l",1-e,0,0,-f,e-1,0,"z"]:["M",c,d+~~(f/2),"l",0,-f,e,0,0,f,"z"];break;case"soft":g?(m=a(Math.round(e/5),f),k=["M",c-~~(e/2),d,"l",0,m-f,"a",m,m,0,0,1,m,-m,"l",e-2*m,0,"a",m,m,0,0,1,m,m,"l",0,f-m,"z"]):(m=a(e,Math.round(f/5)),k=["M",c+.5,d+.5-~~(f/2),"l",e-m,0,"a",m,m,0,0,1,m,m,"l",0,f-2*m,"a",m,m,0,0,1,-m,m,"l",m-e,0,"z"])}return i?k.join(","):j.path(k)}function d(a,b,d,e,f,g,h){h=h||{};var i=this,j=h.type||"square",k=parseFloat(h.gutter||"20%"),l=a.set(),m=a.set(),n=a.set(),o=a.set(),p=Math.max.apply(Math,g),q=[],r=0,s=h.colors||i.colors,t=g.length,u=h.max||"auto";if(Raphael.is(g[0],"array")){p=[],r=t,t=0;for(var v=g.length;v--;)m.push(a.set()),p.push(Math.max.apply(Math,g[v])),t=Math.max(t,g[v].length);if(h.stacked)for(var v=t;v--;){for(var w=0,x=g.length;x--;)w+=+g[x][v]||0;q.push(w)}for(var v=g.length;v--;)if(g[v].length<t)for(var x=t;x--;)g[v].push(0);p=Math.max.apply(Math,h.stacked?q:p)}p=h.to||p;var y=100*(e/(t*(100+k)+k)),z=y*k/100,A=null==h.vgutter?20:h.vgutter,B=[],C=b+z,D="auto"==u?(f-2*A)/p:f/u;h.stretch||(z=Math.round(z),y=Math.floor(y)),!h.stacked&&(y/=r||1);for(var v=0;t>v;v++){B=[];for(var x=0;(r||1)>x;x++){var E=Math.round((r?g[x][v]:g[v])*D),F=d+f-A-E,G=c(Math.round(C+y/2),F+E,y,E,!0,j,null,a).attr({stroke:"none",fill:s[r?x:v]});r?m[x].push(G):m.push(G),G.y=F,G.x=Math.round(C+y/2),G.w=y,G.h=E,G.value=r?g[x][v]:g[v],h.stacked?B.push(G):C+=y}if(h.stacked){var H;o.push(H=a.rect(B[0].x-B[0].w/2,d,y,f).attr(i.shim)),H.bars=a.set();for(var I=0,J=B.length;J--;)B[J].toFront();for(var J=0,K=B.length;K>J;J++){var L,G=B[J],E=(I+G.value)*D,M=c(G.x,d+f-A-.5*!!I,y,E,!0,j,1,a);H.bars.push(G),I&&G.attr({path:M}),G.h=E,G.y=d+f-A-.5*!!I-E,n.push(L=a.rect(G.x-G.w/2,G.y,y,G.value*D).attr(i.shim)),L.bar=G,L.value=G.value,I+=G.value}C+=y}C+=z}if(o.toFront(),C=b+z,!h.stacked)for(var v=0;t>v;v++){for(var x=0;(r||1)>x;x++){var L;n.push(L=a.rect(Math.round(C),d+A,y,f-A).attr(i.shim)),L.bar=r?m[x][v]:m[v],L.value=L.bar.value,C+=y}C+=z}return l.label=function(b,c){b=b||[],this.labels=a.set();var e,i=-1/0;if(h.stacked){for(var j=0;t>j;j++)for(var k=0,l=0;(r||1)>l;l++)if(k+=r?g[l][j]:g[j],l==r-1){var o=a.labelise(b[j],k,p);e=a.text(m[j*(r||1)+l].x,d+f-A/2,o).attr(txtattr).insertBefore(n[j*(r||1)+l]);var q=e.getBBox();q.x-7<i?e.remove():(this.labels.push(e),i=q.x+q.width)}}else for(var j=0;t>j;j++)for(var l=0;(r||1)>l;l++){var o=a.labelise(r?b[l]&&b[l][j]:b[j],r?g[l][j]:g[j],p);e=a.text(m[j*(r||1)+l].x,c?d+f-A/2:m[j*(r||1)+l].y-10,o).attr(txtattr).insertBefore(n[j*(r||1)+l]);var q=e.getBBox();q.x-7<i?e.remove():(this.labels.push(e),i=q.x+q.width)}return this},l.hover=function(a,b){return o.hide(),n.show(),n.mouseover(a).mouseout(b),this},l.hoverColumn=function(a,b){return n.hide(),o.show(),b=b||function(){},o.mouseover(a).mouseout(b),this},l.click=function(a){return o.hide(),n.show(),n.click(a),this},l.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=n.length;b--;)a.call(n[b]);return this},l.eachColumn=function(a){if(!Raphael.is(a,"function"))return this;for(var b=o.length;b--;)a.call(o[b]);return this},l.clickColumn=function(a){return n.hide(),o.show(),o.click(a),this},l.push(m,n,o),l.bars=m,l.covers=n,l}function f(a,b,d,e,f,g,h){h=h||{};var i=this,j=h.type||"square",k=parseFloat(h.gutter||"20%"),l=a.set(),m=a.set(),n=a.set(),o=a.set(),p=Math.max.apply(Math,g),q=[],r=0,s=h.colors||i.colors,t=g.length,u=h.max||"auto";if(Raphael.is(g[0],"array")){p=[],r=t,t=0;for(var v=g.length;v--;)m.push(a.set()),p.push(Math.max.apply(Math,g[v])),t=Math.max(t,g[v].length);if(h.stacked)for(var v=t;v--;){for(var w=0,x=g.length;x--;)w+=+g[x][v]||0;q.push(w)}for(var v=g.length;v--;)if(g[v].length<t)for(var x=t;x--;)g[v].push(0);p=Math.max.apply(Math,h.stacked?q:p)}p=h.to||p;var y=Math.floor(100*(f/(t*(100+k)+k))),z=Math.floor(y*k/100),A=[],B=d+z,C="auto"==u?(e-1)/p:e/u;!h.stacked&&(y/=r||1);for(var v=0;t>v;v++){A=[];for(var x=0;(r||1)>x;x++){var D=r?g[x][v]:g[v],E=c(b,B+y/2,Math.round(D*C),y-1,!1,j,null,a).attr({stroke:"none",fill:s[r?x:v]});r?m[x].push(E):m.push(E),E.x=b+Math.round(D*C),E.y=B+y/2,E.w=Math.round(D*C),E.h=y,E.value=+D,h.stacked?A.push(E):B+=y}if(h.stacked){var F=a.rect(b,A[0].y-A[0].h/2,e,y).attr(i.shim);o.push(F),F.bars=a.set();for(var G=0,H=A.length;H--;)A[H].toFront();for(var H=0,I=A.length;I>H;H++){var J,E=A[H],D=Math.round((G+E.value)*C),K=c(b,E.y,D,y-1,!1,j,1,a);F.bars.push(E),G&&E.attr({path:K}),E.w=D,E.x=b+D,n.push(J=a.rect(b+G*C,E.y-E.h/2,E.value*C,y).attr(i.shim)),J.bar=E,G+=E.value}B+=y}B+=z}if(o.toFront(),B=d+z,!h.stacked)for(var v=0;t>v;v++){for(var x=0;(r||1)>x;x++){var J=a.rect(b,B,e,y).attr(i.shim);n.push(J),J.bar=r?m[x][v]:m[v],J.value=J.bar.value,B+=y}B+=z}return l.label=function(c,d){c=c||[],this.labels=a.set();for(var e=0;t>e;e++)for(var f=0;r>f;f++){var k,h=a.labelise(r?c[f]&&c[f][e]:c[e],r?g[f][e]:g[e],p),i=d?m[e*(r||1)+f].x-y/2+3:b+5,j=d?"end":"start";this.labels.push(k=a.text(i,m[e*(r||1)+f].y,h).attr(txtattr).attr({"text-anchor":j}).insertBefore(n[0])),k.getBBox().x<b+5?k.attr({x:b+5,"text-anchor":"start"}):m[e*(r||1)+f].label=k}return this},l.hover=function(a,b){return o.hide(),n.show(),b=b||function(){},n.mouseover(a).mouseout(b),this},l.hoverColumn=function(a,b){return n.hide(),o.show(),b=b||function(){},o.mouseover(a).mouseout(b),this},l.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=n.length;b--;)a.call(n[b]);return this},l.eachColumn=function(a){if(!Raphael.is(a,"function"))return this;for(var b=o.length;b--;)a.call(o[b]);return this},l.click=function(a){return o.hide(),n.show(),n.click(a),this},l.clickColumn=function(a){return n.hide(),o.show(),o.click(a),this},l.push(m,n,o),l.bars=m,l.covers=n,l}var a=Math.min,b=Math.max,e=function(){};e.prototype=Raphael.g,f.prototype=d.prototype=new e,Raphael.fn.barchart=function(a,b,c,e,f,g){return new d(this,a,b,c,e,f,g)},Raphael.fn.hbarchart=function(a,b,c,d,e,g){return new f(this,a,b,c,d,e,g)}}();